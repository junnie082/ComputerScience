# Database Class 03

## 관계형 데이터 모델

#### 2023.10.14.(토)

### 1. 관계형 데이터 모델

#### 1.1 데이터 모델의 구성 요소

- 데이터 모델(data model)

  - 현실 세계의 데이터를 명세하는 고유한 표현 방식이자 데이터 모델링을 위한 도구
  - 데이터 구조와 연산, 제약 조건 3가지 요소로 구성

- 데이터 모델의 3요소
  - 데이터 구조(data structure)
    - 데이터를 어떤 형태로 저장하는지를 표현하는 추상적 표현
    - 실제 저장 구조가 아닌 개념상의 저장 구조를 직관적으로 표현
  - 데이터 모델의 3요소
    - 데이터 구조(data structure)
      - 데이터를 어떤 형태로 저장하는지를 표현하는 추상적 표현
      - 실제 저장 구조가 아닌 개념상의 저장 구조를 직관적으로 표현
    - 연산(operation)
      - 개념적인 데이터 구조 안의 데이터를 어떤 방식으로 처리하는지를 표현
    - 제약 조건(constraint)
      - 데이터 구조 안에 데이터를 저장할 때의 구조적 제약 사항과 연산을 적용할 때의 행위적 제약 사항을 표현

### 1.2 관계형 데이터 모델의 구성 요소

- 관계형 데이터 모델

  - 테이블 형태의 '릴레이션'을 통해 데이터를 저장하고 데이터 간의 관련성도 표현
  - 데이터베이스를 논리적 수준에서 이해하고 사용할 수 있도록 함

- 관계형 데이터 모델의 3요소

![database1](/assets/images/2023-10-14-2/database1.png)

- 데이터를 저장하는 기본 데이터 구조는 릴레이션
- 릴레이션의 데이터를 처리하는 연산은 관계 대수를 사용
- 제약 사항을 무결성 제약 조건으로 명세

### 2. 관계형 데이터 구조

- 관계형 데이터베이스(relational database)
  - 1970년대 IBM 연구소의 코드(E.F.Codd)가 제안한 관계형 데이터 모델에 기반
- 관계형 데이터 모델(relational data model)
  - 릴레이션으로 불리는 2차원 테이블(table) 형태의 단순 구조에 데이터를 저장하는 방식
  - 테이블 구조는 릴레이션 개념을 직관적으로 쉽게 이해하도록 함
- 릴레이션(relation)
  - 관계형 데이터 모델의 핵심 요소로 특별한 의미를 갖는 테이블
    - 단순 테이블처럼 보이지만 테이블 이상의 많은 의미와 제약 사항이 숨겨져 있음
    - 예) '학생' 릴레이션
    - 관련된 여러 릴레이션들로 데이터베이스를 구성

### 릴레이션 관련 용어

1. 속성과 튜플

- 속성(attribute)

  - 테이블의 열(column)
  - 데이터를 표현하는 가장 작은 논리적 단위
  - 의미적으로 더 이상 분해할 수 없는 원자 값(atomic value)만 사용
  - 릴레이션이 표현하는 대상의 주요 특성들을 서로 다른 이름으로 구별하여 표현

- 튜플(tuple)

  - 테이블의 각 행(row)
  - 현실 세계의 개체(entity)를 표현
  - 각 속성 값(attribute value)들의 조합으로 구성
  - '학생' 릴레이션에서 하나의 튜플은 학생 개체 한 명의 정보를 표현
  - 예) '김연아' 학생의 정보를 표현

  > 예) <'s001', '김연아', 4, '여'>

2. 도메인 (domain)

- 각 속성이 취할 수 있는 모든 값들의 집합을 정의한 것
- 데이터 값들의 유형과 크기, 범위를 정의

> 예) '학년' 속성의 도메인: {1,2,3,4}
> '학번' 속성의 도메인: {'s0001', 's002', 's003', 's004', ...}

- 도메인 정의 예
  - 각 속성끼리 해당 도메인이 일치할 경우만 그 값을 서로 비교하는 것이 의미가 있음

> 예) AGE: '나이' 속성의 도메인
> 숫자(1~150)로 구성된 정수 값의 집합
> SYEAR: '학년' 속성의 도메인
> 숫자(1~4)로 구성된 정수 값의 집합

- 관계형 데이터 모델은 속성 이름과는 별개로 각 도메인을 고유한 이름으로 정의
- 속성 이름은 보통 각 도메인이 릴레이션에서 담당하는 역할(role)의 이름을 지정

3. 카디널리티와 차수

- 각 릴레이션은 카디널리티와 차수를 통해 그 구성이 정의됨

* 카디널리티(cardinality)

  - 릴레이션 안의 전체 튜플의 개수
  - 입력, 수정, 삭제 등을 통해 계속 변화
  - 동적 특성

* 차수(degree)
  - 릴레이션을 구성하는 전체 속성의 개수
  - 각 튜플이 가지는 속성 값의 개수는 릴레이션의 차수와 같음
  - 정적 특성

### 2.2 릴레이션의 구성 요소

- 릴레이션

  - 릴레이션 스키마와 릴레이션 인스턴스 2가지 요소로 구성

- 릴레이션의 구성

![database2](/assets/images/2023-10-14-2/database2.png)

### 릴레이션 스키마

- 릴레이션 스키마(relation schema)

  - 특정 릴레이션의 논리적 구조를 의미
  - 릴레이션의 이름과 릴레이션 안에 포함된 모든 속성의 이름들로 정의
  - 테이블의 첫 번째 행인 헤더 부분에 표현
  - 릴레이션 내포(relational intension)라고도 부름
  - 시간이 경과해도 좀처럼 변경되지 않는 정적인 특성

- '학생' 릴레이션에 대한 릴레이션 스키마

  - 릴레이션 이름 뒤의 괄호 안에 릴레이션이 포함하는 속성들의 이륾을 열거
  - 키 속성은 밑줄 표시
  - 릴레이션 이름(속성이름1, 속성이름2, ..., 속성이름 n)

  > 예) 학생(<U>학번</U>, 이름, 학년, 성별)

### 릴레이션 인스턴스

- 릴레이션 인스턴스(relation instance)

  - 어느 한 시점에 릴레이션에 존재하는 튜플들의 집합
  - 보통 테이블의 첫 번째 행인 헤더 부분을 제외한 나머지 모든 행들의 집합으로 표현
  - 릴레이션 외연(relation extension)이라고도 부름
  - 특정 시점에서의 전체 튜플들의 내용 즉, 릴레이션의 상태를 의미
  - 시간에 따라 변하는 동적인 특성이 있음

- '학생' 릴레이션에 대한 릴레이션 인스턴스

  > 예) {<'s001', '김연아', 4, '여'>,
  > <'s002', '홍길동', 1, '남'>,
  > <'s003', '이승엽', 3, '남'>}

### 데이터베이스 스키마와 데이터베이스 인스턴스

- 데이터베이스 스키마(database schema)
  - 릴레이션 스키마들의 모임으로 정적임
- 데이터베이스 인스턴스(database instance)
  - 특정 시점에서의 모든 릴레이션 인스턴스들의 모임으로 동적임
- 관계형 데이터베이스의 구성
  ![database3](/assets/images/2023-10-14-2/database3.png)

### 2.3 릴레이션의 특성

1. 튜플의 유일성(uniqueness of tuple)

- 릴레이션 안에는 똑같은 튜플이 존재할 수 없음
- 하나의 릴레이션은 튜플들의 집합이기 때문에 모든 튜플은 서로 달라야 함
- 모든 튜플은 다른 튜플과 구별되는 유일한 속성 값이 있어야 함
  - 집합은 식별할 수 없는 똑같은 원소를 중복해서 포함할 수 없기 때문

2. 튜플의 무순서성(no ordering of tuple)

- 릴레이션의 튜플 사이에 순서는 의미가 없음
- 집합은 포함한 원소들 사이에 순서가 없음
- 튜플의 집합인 릴레이션 역시 튜플 사이에 순서를 갖지 않음

* 튜플의 무순서성 예
  - 튜플 순서만 다른 R1과 R2 두 릴레이션은 같은 릴레이션임

3. 속성의 무순서성(no ordering of attribute)

- 릴레이션의 속성 사이에 순서는 의미가 없음
- 릴레이션이 속성의 집합이기 때문에 같은 이유로 순서를 갖지 않음
- 속성 값은 속성의 순서가 아닌 속성 이름에 의해 참조됨

* 속성의 무순서성 예
  - 속성 순서만 다른 R1과 R2 두 릴레이션은 같은 릴레이션임

4. 속성의 원자성(atomicity of attribute)

- 릴레이션을 구성하는 모든 속성 값은 의미적으로 더 이상 분해할 수 없는 하나의 원자 값만을 찾음
- 각 속성 값으로 의미적으로 더 쪼개서 사용할 수 있는 값이나 여러 개의 값이 허용되지 않음
- 릴레이션은 다중 값 속성이나 복합 속성을 허용하지 않음

* 속성의 원자성 예
  - 속성의 원자성을 만족하지 못하는 R1은 결과적으로 릴레이션이 아님

### 3. 제약 조건

#### 3.1 릴레이션의 키(key)

- 각 튜플을 유일하게 식별할 수 있는 하나 이상의 속성 집합
  - 릴레이션은 항상 튜플의 유일성 규칙을 충족하므로 중복 튜플을 허용하지 않음
  - 결과적으로 모든 튜플은 속성 값이 하나 이상이 서로 다름
- 모든 릴레이션은 키를 가짐
  - 키에 속하는 속성 집합은 반드시 그 속성 값의 조합이 튜플마다 달라야 함
- 키는 릴레이션이 단순한 테이블이 아님을 보여주는 대표적 개념
- 여러 무결성 제약 조건과 관련하여 중요한 역할을 함

- 키 선정

  - 현재의 릴레이션 데이터 값만으로 결정하지 않아야 함
  - 릴레이션 인스턴스는 계속 변화하므로 미래의 입력 값까지를 포함한 속성의 본질적인 의미를 고려하여 키 지정 여부를 결정

- 키 종류
  - 후보키, 슈퍼키, 기본키, 대체키, 외래키 등

### 데이터베이스에서 키의 역할

- 데이터베이스에서 키(Key)는 여러 가지 중요한 역할을 수행
  - 고유성: 키는 데이터베이스 테이블의 각 행 또는 레코드를 고유하게 식별할 수 있음. 이 고유성은 중복 데이터가 테이블에 저장되는 것을 방지하여 데이터 불일치와 오류를 방지하는 데 도움
  - 데이터 검색: 키는 효율적인 데이터 검색을 용이하게 제공. 특정 레코드를 검색할 때, 키가 있다면 데이터베이스 관리 시스템은 전체 테이블을 검색하지 않고도 관련 데이터를 빠르게 찾아서 검색.
  - 데이터 무결성: 키는 데이터 무결성을 유지하기 위한 역할. 예를 들어, 기본 키 제약은 키 열에 중복 값이 없도록 보장하고, 외래 키 제약은 테이블 간의 관계를 유지하도록 제공.
  - 조인: 키는 데이터베이스의 다른 테이블 간에 관계를 설정하는 데 사용. 예를 들어, 하나의 테이블에서의 외래 키가 다른 테이블의 기본 키를 참조하여 데이터 간에 의미 있는 관계를 설정하는 데 도움.
  - 인덱싱: 많은 데이터베이스 시스템은 키 열에 대한 인덱스를 자동으로 생성. 인덱스는 키 열의 값에 기반하여 데이터를 빠르게 찾아서 검색할 수 있도록 하여 쿼리 성능을 향상.

### 데이터베이스에서 키의 역할

- 데이터베이스에서 사용되는 주요 키 유형

  - 기본 키(Primary Key): 기본 키는 테이블의 각 레코드를 고유하게 식별하는 고유 식별자. 각 행이 고유한 식별자를 가지도록 보장하며 종종 테이블 간의 관계 설정에 사용.
  - 외래 키(Foreign Key): 외래 키는 하나의 테이블에서 다른 테이블의 기본 키를 참조하는 필드. 이것은 테이블 간의 관계를 설정하며, 참조 무결성을 시행하고 데이터 일관성을 유지하는 데 사용.
  - 고유 키(Unique Key): 고유 키는 기본 키와 유사하지만 널(Null) 값을 허용. 고유성을 시행하지만 주요한 레코드 식별 수단으로 사용되지 않을 수 있음.
  - 복합 키(Composite Key): 복합 키는 여러 열이 함께 사용되어 고유한 식별자로 작동. 단일 열만으로는 충분한 고유성을 제공하지 않을 때 유용.

- 요약하면, 데이터베이스에서 키는 데이터 정확성, 무결성 및 효율성을 보장하는 데 중요한 역할. 이들은 데이터 검색, 제약 조건 시행 및 테이블 간의 관계 설정을 가능하게 하며, 정보를 저장하고 검색하는 데 데이터베이스를 더욱 조직적이고 유용하게 만듦.

### 후보키

- 후보키(CK: Candidate Key)

  - 튜플을 유일하게 식별할 수 있는 속성들의 최소 집합
  - 유일성(uniqueness)과 최소성(minimality) 조건을 모두 만족해야 함
  - 키 속성 중에서 속성을 하나라도 생략하면 튜플을 유일하게 식별할 수 없게 되는, 꼭 필요한 최소한의 속성만으로 구성된 키

- 유일성 조건
  - 릴레이션에서 키로 지정한 속성 값의 조합은 튜플마다 모두 달라야 한다는 의미
- 최소성 조건

  - 릴레이션에서 키로 지정한 속성의 개수를 최소화해야 한다는 의미
  - 둘 이상의 속성으로 이루어진 복합키(composite key)가 아니라면 최소성 조건은 항상 충족함

- 결과적으로 모든 릴레이션은 최소 하나 이상의 후보키를 가짐

- '학원생' 릴레이션의 예
  ![database4](/assets/images/2023-10-14-2/database4.png)

![database5](/assets/images/2023-10-14-2/database5.png)

### 슈퍼키

- 슈퍼키(SK: Super Key)
  - 튜플을 유일하게 식별할 수 있는 속성 집합
    - 식별을 위해 꼭 필요한 속성이 아니어도 포함할 수 있음
    - 슈퍼키는 최소성 충족 여부는 관련이 없고 후보키의 유일성 조건만 만족하면 됨
  - 릴레이션 안에는 여러 후보키가 있을 수 있고 모든 후보키는 슈퍼키임
  - 후보키를 포함하는 속성 집합도 모두 슈퍼키가 됨

![database6](/assets/images/2023-10-14-2/database6.png)

### 기본키

- 기본키(PK: Primary Key)
  - 튜플을 대표하도록 선정된 후보키
    - 여러 후보키 중에서 하나를 기본키로 선택하여 지정
    - 의미적으로 튜플을 가장 대표할 수 있고 또한 식별 수단으로도 적합한 후보키를 기본키로 선정

![database7](/assets/images/2023-10-14-2/database7.png)

- 기본키 선정 기준
  - 후보키가 하나일 경우, 바로 기본키가 됨
  - 후보키가 여러 개일 경우, 다음 기준을 충족하는 후보키를 우선적으로 고려
    - 값이 자주 변경되지 않는 정적인 속성으로 구성된 후보키
    - 널 값을 가질 수 없는 속성으로 구성된 후보키
    - 속성 개수가 작은 후보키
    - 속성 값의 물리적 크기가 작은(숫자 크기가 작거나 문자열 길이가 짧은) 후보키

### 대체키

- 대체키(AK: Alternate Key)
  - 기본키로 선정되지 못한 후보키
    - 둘 이상의 후보키 중에서 하나를 기본키로 지정하면 기본키로 지정되지 않은 나머지 후보키들은 대체키가 됨
    - 릴레이션 안에서 기본키는 하나이지만 대체키는 여러 개 존재할 수 있음

![database8](/assets/images/2023-10-14-2/database8.png)

## 릴레이션 키의 포함 관계

![database9](/assets/images/2023-10-14-2/database9.png)

## 외래키

- 외래키(FK: Foreign Key)
  - 특정 릴레이션의 기본키를 참조하는 속성 집합
  - 외래키의 값은 참조되는 기본키 값 중에서 값 하나를 참조하여 취함
  - 외래키 값은 동일한 값을 기본키 값으로 갖는 튜플과의 관계를 자연스럽게 표현
    - 기본키와 외래키는 릴레이션 간의 연관성을 표현
    - 의미적 연관성이 있음에도 다른 릴레이션으로 분리된 튜플 사이의 연결 고리 역할
  - 기본키와 외래키는 관계형 데이터 모델의 핵심 개념

![database10](/assets/images/2023-10-14-2/database10.png)

### 무결성 제약 조건

- 무결성 제약 조건(integrity constraint)

  - 관계형 데이터 모델에서 릴레이션 안의 모든 데이터들을 의미적으로 흠 없이 항상 정확하고 완전한 상태로 유지하기 위해 적용해야할 제약 사항
  - 데이터 무결성(data integrity)
    - 데이터의 일관성과 정확성에 손상이 없도록 유지되는 특성

- 데이터 무결성을 유지하는 2가지 구현 방식
  - [방법 1] 개별 응용 프로그램 안에 코드를 추가하여 구현
    - 데이터 무결성 유지를 위해 각 프로그램마다 제약 사항을 점검하는 프로그램 코드를 추가하는 방법
    - 구현하기도 부담스럽고 비효율적이며 향후 유지하기도 어려움
  - [방법 2] DBMS 안의 무결성 제약 조건을 설정하여 구현
    - 데이터 무결성 유지를 위해 준수되어야할 공통 제약 사항을 DBMS의 무결성 제약 조건으로 명세하는 방법
    - 별도 구현 없이 간단한 무결성 제약 조건 설정만으로 가능하여 부담도 적고 효율적임
    - DBMS는 이를 해석하여 데이터를 입력, 수정, 삭제할 때마다 제약 조건을 자동적으로 검사하여 적용시킴

### 기본 무결성 제약 조건

- 개체 무결성 제약 조건(entity integrity constraint)

  - 기본키로 지정한 모든 속성은 널 값을 가질 수 없고 릴레이션 안에서 중복되지 않는 유일한 값을 가져야 한다는 제약 사항
  - 기본키 제약 조건(primary key constraint)
  - 개체의 유일성을 선언하는 제약 조건

- 참조 무결성 제약조건(referential integrity constraint)
  - 외래키로 지정한 속성은 참조하는 릴레이션의 기본키 속성 값과 일치하는 값이나 널 값만을 가져야 한다는 제약 사항
  - 외래키 제약 조건(foreign key constraint)
  - 개체의 참조 관계를 선언하는 제약 조건
  - DBMS에게 외래키를 선언함으로써 즉시 적용됨
  - 의미적으로 연관된 두 릴레이션 튜플 사이의 일관성 유지를 위해 사용함

![database11](/assets/images/2023-10-14-2/database11.png)

- 개체 무결성 제약 조건
  - 기본키는 개체 식별자(entity identifier)의 역할
- 참조 무결성 제약 조건
  - 외래키는 개체 참조자(entity referer)의 역할

### 추가적인 제약 조건

- 도메인 무결성 제약 조건(domain integrity constraint)

  - 튜플의 모든 속성 값이 각 속성의 도메인에 속한 값만을 취해야 한다는 제약 사항
  - SQL의 CREATE TABLE 명령문 작성 시
    - 각 열의 타입, NULL/NOT NULL(널 값 허용 여부), DEFAULT(기본 값), CHECK(값 범위 체크 조건) 등의 키워드 설정을 통해 DBMS에게 지시

- 유일성 제약 조건(uniqueness constraint)
  - 모든 키 속성 값이 서로 중복되지 않고 유일해야 한다는 제약 사항
  - 대체키와 밀접한 연관성이 있으며 키 제약 조건(key constraint)이라고도 함
  - SQL의 CREATE TABLE 명령문 작성 시
    - UNIQUE(유일 조건) 키워드 설정을 통해 DBMS에게 지시

### 제약 조건과 적용 SQL 명령어 키워드

![database12](/assets/images/2023-10-14-2/database12.png)

### 4. 관계 연산

- 관계 연산(relation operation)

  - 관계형 데이터 모델에서 릴레이션을 조작하기 위한 연산
  - 관계형 데이터베이스 언어의 명세 형식이나 내부 처리 과정과 밀접한 연관성이 있음

- 관계 연산의 대표적인 2가지 표현 방법
  - 관계 대수(relational algebra)
    - 사용자가 필요로 하는 데이터를 획득하는 절차 즉, 연산들의 적용 순서를 명세
    - 실행 순서를 순차적으로 명세하는 절차적(procedural) 표현 방법
      : 관계 연산의 기본 토대를 제공하고 몇몇 개념은 관계형 표준 데이터베이스 언어인 SQ에 반영되었을 뿐만 아니라 DBMS가 내부적으로 질의를 구현하고 최적화하기 위한 기반으로도 사용됨
  - 관계 해석(relational calculus)
    - 사용자가 필요한 데이터가 무엇인지, 연산들의 최종 결과만을 명세
    - 선언적(declarative) 표현 방법으로 비절차적(nonprocedural) 표현방법

### 관계 연산의 종류

- 관계 대수와 관계 해석
  - 둘 다 기능이나 표현력은 동등함
  - 관계 대수나 관계 해석은 형식 언어로서 둘 다 상용 DBMS가 직접 지원하지는 않으므로 실제 사용할 수 있는 데이터 언어는 아님
  - SQL 언어의 작성 방법이나 내부 처리 방식의 이론적 기반을 제공

![database13](/assets/images/2023-10-14-2/database13.png)

## 관계형 데이터 모델

### 관계형 데이터 모델

- 가장 많이 사용되는 모델
- 데이터 모델링: 현실 세계의 데이터를 컴퓨터 내 데이터베이스로 표현하기 위한 것

Relation(Table)
Entity -> Relation
Relationship -> Relation

### Relation 구조

- 행(row), 열(column)
- Relation Scheme
  - Table 구조를 의미
  - 속성(4개), 기본키(학번)

![database14](/assets/images/2023-10-14-2/database14.png)

- Relation Instance
  - 하나의 행
  - 100 Jane 2 컴퓨터
  - 각 인스턴스를 모아놓은 것: instance set

#### 튜플(Tuple)

- 릴레이션을 구성하는 각각의 행
- 속성 값들의 집합으로 구성
  - 하나의 행
  - 100 Jane 2 컴퓨터 를 말하는 것이 아니라, 행 그 자체를 의미

#### 카디널리티(Cardinality)

- 입력되어 있는 튜플의 수

#### 속성(attribute)

- 릴레이션을 구성하는 각각의 열(column)
- 개체의 특성이나 상태
- 열(column), 항목(item), 필드(field)

#### 차수(Degree)

- 속성의 수

#### 도메인(Domain)

- 속성이 취할 수 있는 같은 타입의 원자값(더 이상 쪼갤 수 없는 값)들의 집합(값의 범위)
  - 예) 초등학교 학년 속성의 도메인(1~6)
- 정의된 속성은 반드시 해당 도메인 내의 값을 가져야 함

### 릴레이션의 특성

- 한 릴레이션에 포함된 튜플들은 모두 상이하다.
- 한 릴레이션에 포함된 튜플 사이에는 순서가 없다.
- 한 릴레이션을 구상하는 속성의 이륾은 유일해야 한다.
- 한 릴레이션을 구성하는 속성 사이에는 순서가 없다.
- 모든 속성 값은 논리적으로 더이상 분해할 수 없는 원자 값이어야 한다.

### ER schema의 Relation schema 사상(mapping rule)

- Mapping: 대응 시키는 것
- 함수에서 기인
- 개념적 설계(ER schema) 단계를 관계 스키마 형태로 매핑 시키는 룰이 존재

![database15](/assets/images/2023-10-14-2/database15.png)

- 1:1 관계

  - 각 개체를 릴레이션으로 만든 후 둘 중 한 개체에 외래키로 상대방을 포함시키고 관계를 포함한다.
  - 교수(교수번호, 이름, 학과, 과목번호) 과목(과목코드, 과목명, 학점)
  - 교수(교수번호, 이름, 학과) 과목(과목코드, 과목명, 학점, 교수번호)

  ![database16](/assets/images/2023-10-14-2/database16.png)

- 1:N 관계
  - 각 관계를 릴레이션으로 만든 후 1의 기본키를 N에 외래키로 포함시키고 관계 역시 N에 포함시킨다
  - 학과(학과코드, 학과명, 전화번호) 학생(학번, 성명, 학과, 학과코드)

![database17](/assets/images/2023-10-14-2/database17.png)

- N:M 관계
  - 모든 개체와 관계를 독립된 릴레이션으로 만든 후, 관계 릴레이션에는 각 개체의 기본키를 외래키로 포함시킨다.
  - 학생(학번, 성명, 학과) 과목(과목번호, 과목명, 학점) 수강(학번, 과목번호)
    ![database18](/assets/images/2023-10-14-2/database18.png)

## 키와 무결성 제약 조건

### 키(Key)

- Edgar Codd

  - Key는 주어진 릴레이션에서 모든 인스턴스 가운데 유일함(unique)를 보장해 주는 하나 이상의 애트리뷰트의 집합
  - 속성과 키는 다른 것
  - 여러 개의 속성으로 키를 만들 수 있음
  - A(a, b, c, d, e, f)
    - a: 학번(유일성)
    - 학번과 같은 유일한 속성이 없으면, 두 개 이상의 속성으로 키를 구성(이름, 신장): 복합키

- Key는

  - 튜플(tuple)을 유일하게 식별할 수 있는 속성 집합
  - 튜플을 검색하거나 정렬할 때 튜플들을 서로 구분할 수 있는 기준이 되는 속성

- Key 특성: 유일성, 최소성
  - 유일성(unique): 중복되지 않음, 오직 하나
    - 수 많은 데이터 중에서 하나를 찾을 때 사용할 수 있는
  - 최소성(minimality): 최소한의 속성으로 하나를 찾을 수 있는
    - 불필요한 속성을 키에 넣으면 안됨
    - A(a, b, c, d) a 하나만 가지고도 가능한데, a, b로 키를 만들면 최소성에 위반

### Super Key

- 튜플을 유일하게 구분하기 위해 한 개 이상의 속성들로 이루어진 키
- 유일성을 만족하지만 최소성을 만족하지 못함(최소성을 만족할 수도 있음)
- 즉 유일성만 만족하면 super key
- 학번, 주민번호, {학번, 이름}

![database19](/assets/images/2023-10-14-2/database19.png)

### Candidate Key(후보키): 기본키가 될 수 있는 키

- 튜플을 유일하게 구분할 수 있는 최소 super key
- 한 릴레이션에서 유일성과 최소성을 모두 만족
- 학번, 주민번호

### 복합키

- 하나의 속성으로 유일한 항목을 선택할 수 없을 때
- {학번, 과목코드}

### Primary Key(기본키)

- 후보키 중에서 대표로 지정된 키
- 하나의 테이블에서는 하나의 기본키만 존재
- 중복값이나 null값을 가질 수 없음
- 주키, 주식별자라고도 함

### Alternate Key(대체키)

- 후보키 중에서 기본키를 제외한 나머지 키
- 후보키-기본키 = 대체키
- 보조키라고도 함

### Foreign Key(외래키)

- 테이블 간에 관계를 맺어주는 키
- 1:n 관계에서는 n쪽에서 1쪽으로

![database20](/assets/images/2023-10-14-2/database20.png)

### Key 정리

![database21](/assets/images/2023-10-14-2/database21.png)

### 무결성 제약(Integrity Constraint)

- 무결성 3대 제약 조건

* 개체 무결성 제약
* 참조 무결성 제약
* 도메인 무결성 제약

### 개체 무결성 제약

- 한 릴레이션의 기본키를 구성하는 어떠한 속성 값도 널(NULL)이거나 중복값을 가질 수 없다.

![database22](/assets/images/2023-10-14-2/database22.png)

### 참조 무결성 제약

- 두 릴레이션 사이의 참조에 문제가 발생하면 안된다.
- 참조되는 테이블의 수정, 삭제는 주의가 필요(학과 테이블의 D001 삭제, D003 수정)
- 참조하는 테이블 속성의 값이 참조되는 속성값의 Domain에 없는 경우(학생 테이블 102의 학과 코드가 D005로 입력)

![database23](/assets/images/2023-10-14-2/database23.png)

### 무결성 제약조건을 위한 DBMS 옵션

- Restrict-No Action: 문제가 되는 연산을 거절
- Cascade: 연쇄삭제, 연쇄수정
- SET NULL: 널 값으로 수정
- SET DEFAULT: 기본 값으로 수정

- 도메인 무결성 제약
  - 주어진 속성의 값이 도메인에 속한 값이어야 함
